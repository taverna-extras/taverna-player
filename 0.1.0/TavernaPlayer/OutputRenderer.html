<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class TavernaPlayer::OutputRenderer - Taverna Player</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/taverna_player/output_renderer.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Object
  
</nav>

    <!-- Included Modules -->
<nav id="includes-section" class="section">
  <h3 class="section-header">Included Modules</h3>

  <ul class="link-list">
  
  
    <li><span class="include">ActionView::Helpers</span>
  
  
  </ul>
</nav>

    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-add">#add</a>
    
    <li><a href="#method-i-default">#default</a>
    
    <li><a href="#method-i-render">#render</a>
    
    <li><a href="#method-i-type_default">#type_default</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../LICENCE_rdoc.html">LICENCE</a>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../TavernaPlayer.html">TavernaPlayer</a>
  
    <li><a href="../TavernaPlayer/ApplicationHelper.html">TavernaPlayer::ApplicationHelper</a>
  
    <li><a href="../TavernaPlayer/OutputRenderer.html">TavernaPlayer::OutputRenderer</a>
  
    <li><a href="../TavernaPlayer/Run.html">TavernaPlayer::Run</a>
  
    <li><a href="../TavernaPlayer/RunPort.html">TavernaPlayer::RunPort</a>
  
    <li><a href="../TavernaPlayer/RunPort/Input.html">TavernaPlayer::RunPort::Input</a>
  
    <li><a href="../TavernaPlayer/RunPort/Output.html">TavernaPlayer::RunPort::Output</a>
  
    <li><a href="../TavernaPlayer/ServiceCredential.html">TavernaPlayer::ServiceCredential</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class TavernaPlayer::OutputRenderer</h1>

  <div id="description" class="description">
    
<p>This class manages the rendering of many different output types that could
be produced by a workflow. It can be configured with new types and the
example renderers for each type can also be changed. An example of how to
set it up can be found in the taverna_player initializer.</p>

<p>Each renderer has all of the ActionView::Helpers (such as link_to, tag,
etc) available to them.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-add" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            add(mimetype, renderer, default = false)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Add a renderer method for the specified MIME type. If you would like the
renderer to be the default for that particular media type then pass true in
the final parameter - the media type is the part of a MIME type before the
slash (/), e.g. “text” or “image”. The MIME type should be specified as a
string.</p>
          

          
          <div class="method-source-code" id="add-source">
            <pre><span class="ruby-comment"># File lib/taverna_player/output_renderer.rb, line 49</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add</span>(<span class="ruby-identifier">mimetype</span>, <span class="ruby-identifier">method</span>, <span class="ruby-identifier">default</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">type</span> = <span class="ruby-constant">MIME</span><span class="ruby-operator">::</span><span class="ruby-constant">Types</span>[<span class="ruby-identifier">mimetype</span>].<span class="ruby-identifier">first</span>

  <span class="ruby-ivar">@hash</span>[<span class="ruby-identifier">type</span>.<span class="ruby-identifier">media_type</span>] <span class="ruby-operator">||=</span> {}
  <span class="ruby-ivar">@hash</span>[<span class="ruby-identifier">type</span>.<span class="ruby-identifier">media_type</span>][<span class="ruby-identifier">type</span>.<span class="ruby-identifier">sub_type</span>] = <span class="ruby-identifier">method</span>
  <span class="ruby-ivar">@hash</span>[<span class="ruby-identifier">type</span>.<span class="ruby-identifier">media_type</span>][<span class="ruby-value">:default</span>] = <span class="ruby-identifier">method</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">default</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- add-source -->
          
        </div>

        

        
      </div><!-- add-method -->

    
      <div id="method-i-default" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            default(method)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Set a default renderer for any MIME type not specifically set. This could
be used to supply a piece of text and a download link for any type that
cannot normally be shown in the browser inline.</p>
          

          
          <div class="method-source-code" id="default-source">
            <pre><span class="ruby-comment"># File lib/taverna_player/output_renderer.rb, line 73</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">default</span>(<span class="ruby-identifier">method</span>)
  <span class="ruby-ivar">@hash</span>[<span class="ruby-value">:default</span>] = <span class="ruby-identifier">method</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- default-source -->
          
        </div>

        

        
      </div><!-- default-method -->

    
      <div id="method-i-render" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            render(content, mimetype) &rarr; markup
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>This is the method that calls the correct renderer for the given content
with the given MIME type and returns the resultant rendering.</p>
          

          
          <div class="method-source-code" id="render-source">
            <pre><span class="ruby-comment"># File lib/taverna_player/output_renderer.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">render</span>(<span class="ruby-identifier">content</span>, <span class="ruby-identifier">mimetype</span>)
  <span class="ruby-identifier">type</span> = <span class="ruby-constant">MIME</span><span class="ruby-operator">::</span><span class="ruby-constant">Types</span>[<span class="ruby-identifier">mimetype</span>].<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">renderer</span> = <span class="ruby-ivar">@hash</span>[<span class="ruby-identifier">type</span>.<span class="ruby-identifier">media_type</span>][<span class="ruby-identifier">type</span>.<span class="ruby-identifier">sub_type</span>] <span class="ruby-operator">||</span>
    <span class="ruby-ivar">@hash</span>[<span class="ruby-identifier">type</span>.<span class="ruby-identifier">media_type</span>][<span class="ruby-value">:default</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@hash</span>[<span class="ruby-value">:default</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">renderer</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Proc</span>
    <span class="ruby-identifier">renderer</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">content</span>, <span class="ruby-identifier">type</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">method</span>(<span class="ruby-identifier">renderer</span>).<span class="ruby-identifier">call</span>(<span class="ruby-identifier">content</span>, <span class="ruby-identifier">type</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- render-source -->
          
        </div>

        

        
      </div><!-- render-method -->

    
      <div id="method-i-type_default" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            type_default(media_type, renderer)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>This is another way of setting the default renderer method for a whole
media type (see the add method for more details).</p>
          

          
          <div class="method-source-code" id="type_default-source">
            <pre><span class="ruby-comment"># File lib/taverna_player/output_renderer.rb, line 62</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">type_default</span>(<span class="ruby-identifier">media_type</span>, <span class="ruby-identifier">method</span>)
  <span class="ruby-ivar">@hash</span>[<span class="ruby-identifier">media_type</span>] <span class="ruby-operator">||=</span> {}
  <span class="ruby-ivar">@hash</span>[<span class="ruby-identifier">media_type</span>][<span class="ruby-value">:default</span>] = <span class="ruby-identifier">method</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- type_default-source -->
          
        </div>

        

        
      </div><!-- type_default-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.2.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

